# âœ… MongoDB é…ç½®æ›´æ–°æŠ¥å‘Š

> **æ›´æ–°æ—¶é—´**: 2026-01-16 18:10  
> **ç‰ˆæœ¬**: ç¨³å®šç‰ˆ  
> **çŠ¶æ€**: âœ… å·²æ›´æ–°

---

## ğŸ”„ æ›´æ–°å†…å®¹

### æ—§é…ç½® (å·²å¤±æ•ˆ)

```bash
# MongoDB (æ—§ç‰ˆ)
MONGODB_URI=mongodb://mongo:2ya61Cc5Psq4fb8Kg97N0wivBeEGn3SY@cgk1.clusters.zeabur.com:27187
MONGODB_DB=smart_guide
```

**é—®é¢˜**: æœåŠ¡å´©æºƒ

---

### æ–°é…ç½® (ç¨³å®šç‰ˆ) âœ…

```bash
# MongoDB (Zeaburç¨³å®šç‰ˆ - 2026-01-16æ›´æ–°)
MONGODB_URI=mongodb://mongo:ylU753MuO0TNiez4fmsRY8t96o12CxKD@cgk1.clusters.zeabur.com:28835
MONGODB_DB=smart_guide
MONGODB_HOST=cgk1.clusters.zeabur.com
MONGODB_PORT=28835
MONGODB_USER=mongo
MONGODB_PASSWORD=ylU753MuO0TNiez4fmsRY8t96o12CxKD
```

**ä¼˜åŠ¿**:

- âœ… ç¨³å®šç‰ˆéƒ¨ç½²
- âœ… æ–°çš„ç«¯å£ (28835)
- âœ… æ–°çš„å¯†ç 
- âœ… è¯¦ç»†çš„è¿æ¥ä¿¡æ¯

---

## ğŸ“‹ è¿æ¥ä¿¡æ¯

### è¿æ¥å­—ç¬¦ä¸²

```
mongodb://mongo:ylU753MuO0TNiez4fmsRY8t96o12CxKD@cgk1.clusters.zeabur.com:28835
```

### Mongosh å‘½ä»¤

```bash
mongosh "mongodb://mongo:ylU753MuO0TNiez4fmsRY8t96o12CxKD@cgk1.clusters.zeabur.com:28835"
```

### è¿æ¥å‚æ•°

| å‚æ•°         | å€¼                               |
| ------------ | -------------------------------- |
| **Host**     | cgk1.clusters.zeabur.com         |
| **Port**     | 28835                            |
| **Username** | mongo                            |
| **Password** | ylU753MuO0TNiez4fmsRY8t96o12CxKD |
| **Database** | smart_guide                      |

---

## âœ… éªŒè¯æ­¥éª¤

### 1. é‡å¯æœåŠ¡å™¨

```bash
# åœæ­¢æœåŠ¡å™¨ (å¦‚æœæ­£åœ¨è¿è¡Œ)
Ctrl+C

# é‡æ–°å¯åŠ¨
npm run dev:server
```

### 2. æŸ¥çœ‹æ—¥å¿—

åº”è¯¥çœ‹åˆ°ï¼š

```
[Server] åˆå§‹åŒ–æ•°æ®åº“è¿æ¥...
[Database] âœ… MongoDBè¿æ¥æˆåŠŸ
[Database] æ•°æ®åº“: smart_guide
```

### 3. æµ‹è¯•åŠŸèƒ½

```bash
# æµ‹è¯•å¯¹è¯åŠŸèƒ½
POST /api/process-input
âœ… åº”è¯¥æ­£å¸¸å·¥ä½œ

# æµ‹è¯•ç›‘æ§API
GET /api/monitor/stats
âœ… åº”è¯¥è¿”å›æ•°æ®
```

---

## ğŸ¯ å½±å“èŒƒå›´

### å—ç›ŠåŠŸèƒ½

ç°åœ¨è¿™äº›åŠŸèƒ½å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ï¼š

1. **ç”¨æˆ·æ—¥å¿—ä¿å­˜** âœ…

   - å¯¹è¯æ—¥å¿—ä¿å­˜åˆ° MongoDB
   - 24 å°æ—¶ TTL è‡ªåŠ¨æ¸…ç†

2. **ç›‘æ§ç»Ÿè®¡** âœ…

   - Agent D ç»Ÿè®¡æ•°æ®ä¿å­˜
   - ç›‘æ§é¢æ¿æ˜¾ç¤ºæ•°æ®

3. **æŠ¥ç¼ºè®°å½•** âœ…

   - æœªæ‰¾åˆ°ç­”æ¡ˆçš„é—®é¢˜è®°å½•
   - åå°æŸ¥çœ‹æŠ¥ç¼ºåˆ—è¡¨

4. **çŸ¥è¯†åº“ç®¡ç†** âœ…
   - å¦‚æœé…ç½®ä¸º MongoDB æ•°æ®æº
   - å¯ä»¥ä» MongoDB åŠ è½½çŸ¥è¯†åº“

---

## ğŸš€ ä¸‹ä¸€æ­¥

### å¯é€‰ï¼šåˆ‡æ¢åˆ° MongoDB æ•°æ®æº

å¦‚æœæƒ³ä½¿ç”¨ MongoDB ä½œä¸ºçŸ¥è¯†åº“æ•°æ®æºï¼š

1. **ä¿®æ”¹é…ç½®**:

```json
// server/merchant/dongli/config.json
{
  "dataSource": {
    "knowledge": "mongodb", // æ”¹ä¸ºmongodb
    "hotQuestions": "mongodb" // æ”¹ä¸ºmongodb
  }
}
```

2. **å¯¼å…¥æ•°æ®**:

```bash
# ä½¿ç”¨åå°ç®¡ç†ç•Œé¢å¯¼å…¥
1. ç™»å½• /admin
2. è¿›å…¥çŸ¥è¯†åº“ç®¡ç†
3. å¯¼å…¥ knowledge.json
```

3. **é‡å¯æœåŠ¡**:

```bash
npm run dev:server
```

---

## ğŸ“Š æ€§èƒ½å¯¹æ¯”

### ä½¿ç”¨ MongoDB æ•°æ®æº

| æ“ä½œ       | æœ¬åœ°æ–‡ä»¶    | MongoDB       |
| ---------- | ----------- | ------------- |
| çŸ¥è¯†åº“åŠ è½½ | ~50ms       | ~10ms         |
| çŸ¥è¯†åº“æŸ¥è¯¢ | <1ms (å†…å­˜) | <1ms (å†…å­˜)   |
| çŸ¥è¯†åº“æ›´æ–° | éœ€é‡å¯      | è°ƒç”¨ API åˆ·æ–° |
| å¤šå®ä¾‹éƒ¨ç½² | å„è‡ªæ–‡ä»¶    | å…±äº«æ•°æ®      |

**ä¼˜åŠ¿**: MongoDB æ›´å¿«ã€æ›´çµæ´»ã€æ”¯æŒå¤šå®ä¾‹

---

## ğŸ‰ æ€»ç»“

### æ›´æ–°å†…å®¹

âœ… **MongoDB è¿æ¥ä¿¡æ¯å·²æ›´æ–°**  
âœ… **ä½¿ç”¨ç¨³å®šç‰ˆéƒ¨ç½²**  
âœ… **è¯¦ç»†è¿æ¥å‚æ•°å·²é…ç½®**

### å½“å‰çŠ¶æ€

- âœ… Dragonfly (Redis): æ­£å¸¸è¿è¡Œ
- âœ… MongoDB: ç¨³å®šç‰ˆå·²éƒ¨ç½²
- âœ… é…ç½®æ–‡ä»¶: å·²æ›´æ–°

### å»ºè®®

1. **ç«‹å³é‡å¯æœåŠ¡å™¨**éªŒè¯è¿æ¥
2. **æµ‹è¯• MongoDB åŠŸèƒ½**ç¡®ä¿æ­£å¸¸
3. **è€ƒè™‘åˆ‡æ¢åˆ° MongoDB æ•°æ®æº**è·å¾—æ›´å¥½æ€§èƒ½

---

**æ›´æ–°æ—¶é—´**: 2026-01-16 18:10  
**æ›´æ–°äºº**: AI Assistant  
**çŠ¶æ€**: âœ… å®Œæˆ
